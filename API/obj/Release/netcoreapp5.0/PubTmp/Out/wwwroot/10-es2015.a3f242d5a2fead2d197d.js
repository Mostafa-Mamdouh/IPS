(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Osg9:function(t,e,a){"use strict";a.r(e);var i=a("ofXK"),r=a("pKmL"),c=a("tyNb"),n=a("NUQi"),b=a("3Pt+"),s=a("Su43"),o=a("fXoL"),d=a("tk/3"),h=a("lJxs"),l=a("AytR"),u=a("UDJr");let p=(()=>{class t{constructor(t){this.http=t,this.baseUrl=l.a.apiUrl,this.pagination=new u.a}getTransactions(t,e){let a=new d.f;return a=a.append("pageIndex",e.pageNumber.toString()),a=a.append("pageSize",e.pageSize.toString()),this.http.get(this.baseUrl+`${t==s.g.Bank?"home/bank-transaction":"home/cash-transaction"}`,{observe:"response",params:a}).pipe(Object(h.a)(t=>(this.pagination=t.body,this.pagination)))}getCurrentCredit(){return this.http.get(this.baseUrl+"credit/"+s.a.currentCredit)}saveCredit(t){return this.http.post(this.baseUrl+"credit/update",t).pipe(Object(h.a)(t=>(this.credit=t,this.credit)))}}return t.\u0275fac=function(e){return new(e||t)(o.Vb(d.b))},t.\u0275prov=o.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=a("5eHb"),g=a("Ag0X");function f(t,e){1&t&&(o.Rb(0,"span",14),o.Dc(1," Bank Credit is required"),o.Qb())}function v(t,e){1&t&&(o.Rb(0,"span",14),o.Dc(1," Cash Credit is required"),o.Qb())}let R=(()=>{class t{constructor(t,e,a,i,r){this.creditService=t,this.router=e,this.formBuilder=a,this.toastr=i,this.activatedroute=r,this.creditId=1}ngOnInit(){this.createCreditForm(),this.loadCredit()}createCreditForm(){this.creditForm=this.formBuilder.group({id:new b.e(s.a.currentCredit),bankCredit:new b.e(0,[b.q.required]),cashCredit:new b.e(0,[b.q.required])})}collectFormData(){this.creditEditor={id:this.creditForm.controls.id.value,bankCredit:this.creditForm.controls.bankCredit.value,cashCredit:this.creditForm.controls.cashCredit.value,createDate:null,createdBy:null}}assignFormData(t){this.creditForm.controls.id.setValue(t.id),this.creditForm.controls.bankCredit.setValue(t.bankCredit),this.creditForm.controls.cashCredit.setValue(t.cashCredit)}loadCredit(){this.creditService.getCurrentCredit().subscribe(t=>{this.credit=t,this.assignFormData(this.credit)},t=>{console.log(t.message)})}onSubmit(){this.markFormGroupTouched(this.creditForm),this.creditForm.valid&&(this.collectFormData(),this.saveCredit())}saveCredit(){this.creditService.saveCredit(this.creditEditor).subscribe(t=>{this.toastr.success("credit saved successfully"),this.router.navigateByUrl("/transaction")},t=>{console.log(t)})}markFormGroupTouched(t){Object.values(t.controls).forEach(t=>{t.markAsTouched(),t.controls&&this.markFormGroupTouched(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(p),o.Lb(c.c),o.Lb(b.d),o.Lb(m.b),o.Lb(c.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-credit-editor"]],decls:36,vars:3,consts:[["id","page-wrapper",1,""],[1,"container-fluid"],[1,"row","row-stat"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-heading","panel-heading-divider"],[1,"panel-subtitle"],[1,"panel-body"],[1,"panel-heading","panel-heading-no-divider"],[1,"row","form-horizontal",3,"formGroup","ngSubmit"],[1,"col-md-6"],[1,"form-group"],[1,"row"],[1,"col-sm-3","control-label"],[1,"text-danger"],[1,"col-sm-7"],["id","bankCredit","autocomplete","off","formControlName","bankCredit","type","number",1,"form-control"],["class","text-danger",4,"ngIf"],["id","cashCredit","autocomplete","off","formControlName","cashCredit","type","number",1,"form-control"],[1,"col-md-11"],["type","submit","id","Save",1,"btn","btn-primary","pull-right"],[1,"fa","fa-save"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"div",4),o.Rb(5,"div",5),o.Dc(6," Update Overall Credit "),o.Rb(7,"span",6),o.Dc(8,"Save credit information"),o.Qb(),o.Qb(),o.Rb(9,"div",7),o.Rb(10,"div",8),o.Mb(11,"app-section-header"),o.Qb(),o.Rb(12,"form",9),o.Zb("ngSubmit",(function(){return e.onSubmit()})),o.Rb(13,"div",10),o.Rb(14,"div",11),o.Rb(15,"div",12),o.Rb(16,"label",13),o.Dc(17,"Bank Credit "),o.Rb(18,"span",14),o.Dc(19,"*"),o.Qb(),o.Qb(),o.Rb(20,"div",15),o.Mb(21,"input",16),o.Bc(22,f,2,0,"span",17),o.Qb(),o.Qb(),o.Qb(),o.Rb(23,"div",11),o.Rb(24,"div",12),o.Rb(25,"label",13),o.Dc(26,"Cash Credit "),o.Rb(27,"span",14),o.Dc(28,"*"),o.Qb(),o.Qb(),o.Rb(29,"div",15),o.Mb(30,"input",18),o.Bc(31,v,2,0,"span",17),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(32,"div",19),o.Rb(33,"button",20),o.Rb(34,"i",21),o.Dc(35," Save"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.zb(12),o.hc("formGroup",e.creditForm),o.zb(10),o.hc("ngIf",e.creditForm.get("bankCredit").invalid&&e.creditForm.get("bankCredit").touched&&e.creditForm.get("bankCredit").errors.required),o.zb(9),o.hc("ngIf",e.creditForm.get("cashCredit").invalid&&e.creditForm.get("cashCredit").touched&&e.creditForm.get("cashCredit").errors.required))},directives:[g.a,b.r,b.n,b.h,b.b,b.o,b.m,b.f,i.n],styles:[""]}),t})();class Q{constructor(){this.pageNumber=1,this.pageSize=10}}var C=a("2rwd"),D=a("K3ix"),z=a("PVRP"),k=a("/gyc"),I=a("a4eG");function T(t,e){if(1&t&&(o.Rb(0,"div",8),o.Rb(1,"div"),o.Rb(2,"label",12),o.Dc(3,"Overall Bank Credit :"),o.Qb(),o.Rb(4,"span",13),o.Dc(5),o.Qb(),o.Qb(),o.Rb(6,"div"),o.Rb(7,"label",12),o.Dc(8,"Overall Cash Credit :"),o.Qb(),o.Rb(9,"span",13),o.Dc(10),o.Qb(),o.Qb(),o.Qb()),2&t){const t=o.bc();o.zb(5),o.Fc("",t.credit.bankCredit," L.E"),o.zb(5),o.Fc("",t.credit.cashCredit," L.E")}}function B(t,e){if(1&t&&(o.Rb(0,"a",25),o.Dc(1),o.Qb()),2&t){const t=o.bc().$implicit;o.jc("routerLink","/purchase-invoice/view/",t.invoiceId,""),o.zb(1),o.Fc(" ",t.invoiceId,"")}}function F(t,e){if(1&t&&(o.Rb(0,"a",25),o.Dc(1),o.Qb()),2&t){const t=o.bc().$implicit;o.jc("routerLink","/expenses/edit/",t.invoiceId,""),o.zb(1),o.Fc(" ",t.invoiceId,"")}}function S(t,e){if(1&t&&(o.Rb(0,"tr"),o.Rb(1,"td"),o.Dc(2),o.Qb(),o.Rb(3,"td"),o.Dc(4),o.Qb(),o.Rb(5,"td"),o.Bc(6,B,2,2,"a",24),o.Bc(7,F,2,2,"a",24),o.Qb(),o.Rb(8,"td"),o.Dc(9),o.Qb(),o.Rb(10,"td"),o.Dc(11),o.Qb(),o.Rb(12,"td"),o.Dc(13),o.Qb(),o.Rb(14,"td"),o.Dc(15),o.cc(16,"date"),o.Qb(),o.Rb(17,"td"),o.Dc(18),o.cc(19,"number"),o.Qb(),o.Rb(20,"td"),o.Dc(21),o.cc(22,"number"),o.Qb(),o.Rb(23,"td"),o.Dc(24),o.cc(25,"number"),o.Qb(),o.Qb()),2&t){const t=e.$implicit;o.zb(2),o.Fc(" ",t.paymentId," "),o.zb(2),o.Fc(" ",t.type," "),o.zb(2),o.hc("ngIf","Expenses"!=t.type),o.zb(1),o.hc("ngIf","Expenses"==t.type),o.zb(2),o.Fc(" ",t.invoiceNumber," "),o.zb(2),o.Fc(" ",t.brokerName," "),o.zb(2),o.Ec(t.description),o.zb(2),o.Ec(o.dc(16,11,t.date)),o.zb(3),o.Ec(o.ec(19,13,t.credit,"1.1-5")),o.zb(3),o.Ec(o.ec(22,16,t.debit,"1.1-5")),o.zb(3),o.Ec(o.ec(25,19,t.current,"1.1-5"))}}function y(t,e){if(1&t&&(o.Rb(0,"table",22),o.Rb(1,"thead"),o.Rb(2,"tr"),o.Rb(3,"th"),o.Dc(4,"Payment ID"),o.Qb(),o.Rb(5,"th"),o.Dc(6,"Type"),o.Qb(),o.Rb(7,"th"),o.Dc(8,"Invoice ID"),o.Qb(),o.Rb(9,"th"),o.Dc(10,"Invoice Number"),o.Qb(),o.Rb(11,"th"),o.Dc(12,"Broker Name"),o.Qb(),o.Rb(13,"th"),o.Dc(14,"Description"),o.Qb(),o.Rb(15,"th"),o.Dc(16,"Date"),o.Qb(),o.Rb(17,"th"),o.Dc(18,"Credit"),o.Qb(),o.Rb(19,"th"),o.Dc(20,"Debit"),o.Qb(),o.Rb(21,"th"),o.Dc(22,"Current"),o.Qb(),o.Qb(),o.Qb(),o.Rb(23,"tbody"),o.Bc(24,S,26,22,"tr",23),o.Qb(),o.Qb()),2&t){const t=o.bc(2);o.zb(24),o.hc("ngForOf",t.bankTransactions)}}function w(t,e){1&t&&o.Mb(0,"div",26)}function P(t,e){if(1&t&&(o.Rb(0,"div",27),o.Mb(1,"app-paging-header",28),o.Qb()),2&t){const t=o.bc(2);o.zb(1),o.hc("pageNumber",t.latestBankTransactionParams.pageNumber)("pageSize",t.latestBankTransactionParams.pageSize)("totalCount",t.totalBankCount)}}function x(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",29),o.Rb(1,"app-pager",30),o.Zb("pageChanged",(function(e){return o.vc(t),o.bc(2).onBankPageChanged(e)})),o.Qb(),o.Qb()}if(2&t){const t=o.bc(2);o.zb(1),o.hc("pageSize",t.latestBankTransactionParams.pageSize)("totalCount",t.totalBankCount)}}function L(t,e){if(1&t&&(o.Rb(0,"div",4),o.Rb(1,"div",5),o.Rb(2,"div",14),o.Rb(3,"div",15),o.Rb(4,"div",16),o.Rb(5,"h5"),o.Mb(6,"i",17),o.Dc(7," Bank "),o.Qb(),o.Qb(),o.Qb(),o.Mb(8,"br"),o.Mb(9,"br"),o.Qb(),o.Bc(10,y,25,1,"table",18),o.Bc(11,w,1,0,"div",19),o.Bc(12,P,2,3,"div",20),o.Bc(13,x,2,2,"div",21),o.Qb(),o.Qb()),2&t){const t=o.bc();o.zb(10),o.hc("ngIf",t.bankTransactions),o.zb(1),o.hc("ngIf",t.bankTransactions),o.zb(1),o.hc("ngIf",t.bankTransactions),o.zb(1),o.hc("ngIf",t.bankTransactions)}}function N(t,e){if(1&t&&(o.Rb(0,"a",25),o.Dc(1),o.Qb()),2&t){const t=o.bc().$implicit;o.jc("routerLink","/purchase-invoice/view/",t.invoiceId,""),o.zb(1),o.Fc(" ",t.invoiceId,"")}}function M(t,e){if(1&t&&(o.Rb(0,"a",25),o.Dc(1),o.Qb()),2&t){const t=o.bc().$implicit;o.jc("routerLink","/expenses/edit/",t.invoiceId,""),o.zb(1),o.Fc(" ",t.invoiceId,"")}}function E(t,e){if(1&t&&(o.Rb(0,"tr"),o.Rb(1,"td"),o.Dc(2),o.Qb(),o.Rb(3,"td"),o.Dc(4),o.Qb(),o.Rb(5,"td"),o.Bc(6,N,2,2,"a",24),o.Bc(7,M,2,2,"a",24),o.Qb(),o.Rb(8,"td"),o.Dc(9),o.Qb(),o.Rb(10,"td"),o.Dc(11),o.Qb(),o.Rb(12,"td"),o.Dc(13),o.Qb(),o.Rb(14,"td"),o.Dc(15),o.cc(16,"date"),o.Qb(),o.Rb(17,"td"),o.Dc(18),o.cc(19,"number"),o.Qb(),o.Rb(20,"td"),o.Dc(21),o.cc(22,"number"),o.Qb(),o.Rb(23,"td"),o.Dc(24),o.cc(25,"number"),o.Qb(),o.Qb()),2&t){const t=e.$implicit;o.zb(2),o.Fc(" ",t.paymentId," "),o.zb(2),o.Fc(" ",t.type," "),o.zb(2),o.hc("ngIf","Expenses"!=t.type),o.zb(1),o.hc("ngIf","Expenses"==t.type),o.zb(2),o.Fc(" ","Purchasing"==t.type?t.purchaseInvoiceNumber:"Sales"==t.type?t.SalesInvoiceNumber:null," "),o.zb(2),o.Fc(" ",t.brokerName," "),o.zb(2),o.Ec(t.description),o.zb(2),o.Ec(o.dc(16,11,t.date)),o.zb(3),o.Ec(o.ec(19,13,t.credit,"1.1-5")),o.zb(3),o.Ec(o.ec(22,16,t.debit,"1.1-5")),o.zb(3),o.Ec(o.ec(25,19,t.current,"1.1-5"))}}function O(t,e){if(1&t&&(o.Rb(0,"table",22),o.Rb(1,"thead"),o.Rb(2,"tr"),o.Rb(3,"th"),o.Dc(4,"Payment ID"),o.Qb(),o.Rb(5,"th"),o.Dc(6,"Type"),o.Qb(),o.Rb(7,"th"),o.Dc(8,"Invoice ID"),o.Qb(),o.Rb(9,"th"),o.Dc(10,"Invoice Number"),o.Qb(),o.Rb(11,"th"),o.Dc(12,"Broker Name"),o.Qb(),o.Rb(13,"th"),o.Dc(14,"Description"),o.Qb(),o.Rb(15,"th"),o.Dc(16,"Date"),o.Qb(),o.Rb(17,"th"),o.Dc(18,"Credit"),o.Qb(),o.Rb(19,"th"),o.Dc(20,"Debit"),o.Qb(),o.Rb(21,"th"),o.Dc(22,"Current"),o.Qb(),o.Qb(),o.Qb(),o.Rb(23,"tbody"),o.Bc(24,E,26,22,"tr",23),o.Qb(),o.Qb()),2&t){const t=o.bc(2);o.zb(24),o.hc("ngForOf",t.cashTransactions)}}function U(t,e){1&t&&o.Mb(0,"div",26)}function j(t,e){if(1&t&&(o.Rb(0,"div",33),o.Mb(1,"app-paging-header",28),o.Qb()),2&t){const t=o.bc(2);o.zb(1),o.hc("pageNumber",t.latestCashTransactionParams.pageNumber)("pageSize",t.latestCashTransactionParams.pageSize)("totalCount",t.totalCashCount)}}function V(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",29),o.Rb(1,"app-pager",30),o.Zb("pageChanged",(function(e){return o.vc(t),o.bc(2).onCashPageChanged(e)})),o.Qb(),o.Qb()}if(2&t){const t=o.bc(2);o.zb(1),o.hc("pageSize",t.latestCashTransactionParams.pageSize)("totalCount",t.totalCashCount)}}function $(t,e){if(1&t&&(o.Rb(0,"div",4),o.Rb(1,"div",5),o.Rb(2,"div",14),o.Rb(3,"div",15),o.Rb(4,"div",16),o.Rb(5,"h5"),o.Mb(6,"i",31),o.Dc(7," Cash Safe "),o.Qb(),o.Qb(),o.Qb(),o.Mb(8,"br"),o.Mb(9,"br"),o.Qb(),o.Bc(10,O,25,1,"table",18),o.Bc(11,U,1,0,"div",19),o.Bc(12,j,2,3,"div",32),o.Bc(13,V,2,2,"div",21),o.Qb(),o.Qb()),2&t){const t=o.bc();o.zb(10),o.hc("ngIf",t.cashTransactions),o.zb(1),o.hc("ngIf",t.cashTransactions),o.zb(1),o.hc("ngIf",t.cashTransactions),o.zb(1),o.hc("ngIf",t.cashTransactions)}}const q=[{path:"",component:(()=>{class t{constructor(t,e,a,i,r,c){this.accountService=t,this.creditService=e,this.activatedroute=a,this.toastr=i,this.router=r,this.modalService=c,this.latestBankTransactionParams=new Q,this.latestCashTransactionParams=new Q,this.bankCurrentCredit=0,this.cashCurrentCredit=0,this.totalBankCount=64,this.totalCashCount=64}ngOnInit(){this.currentUser$=this.accountService.currentUser$,this.getTranasctions(s.g.Bank),this.getTranasctions(s.g.Cash),this.loadCredit()}getTranasctions(t){this.creditService.getTransactions(t,1==t?this.latestBankTransactionParams:this.latestCashTransactionParams).subscribe(e=>{1==t?this.bankTransactions=e.data:this.cashTransactions=e.data,1==t?this.latestBankTransactionParams.pageNumber=e.pageIndex:this.latestCashTransactionParams.pageNumber=e.pageIndex,1==t?this.latestBankTransactionParams.pageSize=e.pageSize:this.latestCashTransactionParams.pageSize=e.pageSize,1==t?this.totalBankCount=e.count:this.totalCashCount=e.count},t=>{console.log(t)})}onBankPageChanged(t){this.latestBankTransactionParams.pageNumber!==t&&(this.latestBankTransactionParams.pageNumber=t,this.getTranasctions(s.g.Bank))}onCashPageChanged(t){this.latestCashTransactionParams.pageNumber!==t&&(this.latestCashTransactionParams.pageNumber=t,this.getTranasctions(s.g.Cash))}loadCredit(){this.creditService.getCurrentCredit().subscribe(t=>{this.credit=t},t=>{console.log(t.message)})}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(C.a),o.Lb(p),o.Lb(c.a),o.Lb(m.b),o.Lb(c.c),o.Lb(D.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-credit"]],decls:20,vars:3,consts:[["id","page-wrapper",1,""],[1,"container-fluid"],[1,"row","row-stat"],[1,"col-sm-12"],[1,"row"],[1,"col-md-12"],[1,"panel","panel-default","panel-flat"],["class","col-md-6",4,"ngIf"],[1,"col-md-6"],["routerLink","/transaction/edit",1,"action-button"],[1,"fa","fa-edit"],["class","row",4,"hasClaim"],["for","",1,"credit"],[1,"cr"],[1,"table-responsive"],[1,"col-md-12","form-inline","md-form","form-sm","mt-1"],[1,"row","g-12","md-form"],["aria-hidden","true",1,"fa","fa-credit-card-alt"],["class","table",4,"ngIf"],["class","row m-2 pull-right",4,"ngIf"],["class","xs-mb-50 xs-mt-50 xs-mr-40 pull-left",4,"ngIf"],["class","xs-mb-50 xs-mt-40 xs-ml-40 pull-right",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],["class","action-button",3,"routerLink",4,"ngIf"],[1,"action-button",3,"routerLink"],[1,"row","m-2","pull-right"],[1,"xs-mb-50","xs-mt-50","xs-mr-40","pull-left"],[3,"pageNumber","pageSize","totalCount"],[1,"xs-mb-50","xs-mt-40","xs-ml-40","pull-right"],[3,"pageSize","totalCount","pageChanged"],["aria-hidden","true",1,"fa","fa-money"],["class","xs-mb-50 xs-mt-40 xs-ml-40 pull-left",4,"ngIf"],[1,"xs-mb-50","xs-mt-40","xs-ml-40","pull-left"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"div",4),o.Rb(5,"div",5),o.Rb(6,"div",6),o.Mb(7,"br"),o.Rb(8,"div",4),o.Bc(9,T,11,2,"div",7),o.Rb(10,"div",8),o.Rb(11,"a",9),o.Mb(12,"i",10),o.Dc(13," Update Overall Credit"),o.Qb(),o.Qb(),o.Qb(),o.Mb(14,"br"),o.Mb(15,"br"),o.Bc(16,L,14,4,"div",11),o.Mb(17,"br"),o.Mb(18,"br"),o.Bc(19,$,14,4,"div",11),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.zb(9),o.hc("ngIf",e.credit),o.zb(7),o.hc("hasClaim","Transaction:List/View Transactions"),o.zb(3),o.hc("hasClaim","Transaction:List/View Transactions"))},directives:[i.n,c.e,z.a,i.m,k.a,I.a],pipes:[i.e,i.f],styles:[".cr[_ngcontent-%COMP%]{color:#00008b}.credit[_ngcontent-%COMP%]{font-size:medium}"]}),t})(),data:{Permission:["Transaction:List/View Transactions"]},canActivate:[n.a]},{path:"edit",component:R,canActivate:[n.a],data:{breadcrumb:"Update",Permission:["Transaction:List/View Transactions"]}}];let G=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[c.f.forChild(q)],c.f]}),t})();var J=a("PCNd"),A=a("hzby"),K=a("Lm2G");a.d(e,"CreditModule",(function(){return X}));let X=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[i.c,J.a,G,r.a,K.b.forRoot(),A.c.forRoot()]]}),t})()}}]);