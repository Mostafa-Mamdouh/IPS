function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{d7gL:function(e,t,r){"use strict";r.r(t);var o,i=r("ofXK"),a=r("hzby"),n=r("pKmL"),s=r("tyNb"),c=r("NUQi"),u=r("3Pt+"),b=r("Su43"),l=r("fXoL"),m=r("tk/3"),p=r("lJxs"),d=r("AytR"),h=r("UDJr"),f=((o=function(){function e(t){_classCallCheck(this,e),this.http=t,this.baseUrl=d.a.apiUrl,this.pagination=new h.a,this.citeies=[],this.countries=[]}return _createClass(e,[{key:"getCustomerById",value:function(e,t){return this.http.get(this.baseUrl+"".concat(e==b.b.Client?"client":"supplier","/")+t)}},{key:"getCustomers",value:function(e,t){var r=this,o=new m.f;return t.createFromDate&&(o=o.append("CreateFromDate",t.createFromDate.toISOString())),t.createToDate&&(o=o.append("CreateToDate",t.createToDate.toISOString())),t.invoiceFromDate&&(o=o.append("InvoiceFromDate",t.invoiceFromDate.toISOString())),t.invoiceToDate&&(o=o.append("InvoiceToDate",t.invoiceToDate.toISOString())),t.search&&(o=o.append("search",t.search)),o=(o=(o=o.append("sort",t.sort)).append("pageIndex",t.pageNumber.toString())).append("pageSize",t.pageSize.toString()),this.http.get(this.baseUrl+"".concat(e==b.b.Client?"client":"supplier"),{observe:"response",params:o}).pipe(Object(p.a)((function(e){return r.pagination=e.body,r.pagination})))}},{key:"exportCustomers",value:function(e,t){var r=new m.f;return t.createFromDate&&(r=r.append("CreateFromDate",t.createFromDate.toISOString())),t.createToDate&&(r=r.append("CreateToDate",t.createToDate.toISOString())),t.invoiceFromDate&&(r=r.append("InvoiceFromDate",t.invoiceFromDate.toISOString())),t.invoiceToDate&&(r=r.append("InvoiceToDate",t.invoiceToDate.toISOString())),r=(r=r.append("pageIndex",t.pageNumber.toString())).append("pageSize",t.pageSize.toString()),this.http.get(this.baseUrl+"".concat(e==b.b.Client?"client":"supplier","/export"),{responseType:"blob",params:r}).pipe()}},{key:"saveCustomer",value:function(e,t,r){var o=this;return this.http.post(this.baseUrl+"".concat(e==b.b.Client?"client":"supplier","/").concat(r>0?"update":"create"),t).pipe(Object(p.a)((function(e){return o.customer=e,o.customer})))}},{key:"getCountriesLookup",value:function(){var e=this;return this.http.get(this.baseUrl+"home/country",{observe:"response"}).pipe(Object(p.a)((function(t){return e.countries=t.body,e.countries})))}},{key:"getCitiesByCountryIdLookup",value:function(e){var t=this;return this.http.get(this.baseUrl+"home/cities/".concat(e),{observe:"response"}).pipe(Object(p.a)((function(e){return t.citeies=e.body,t.citeies})))}},{key:"deleteCustomer",value:function(e,t){var r=this;return this.http.delete(this.baseUrl+"".concat(e==b.b.Client?"client":"supplier","/").concat(t)).pipe(Object(p.a)((function(e){return r.customer=e,r.customer})))}},{key:"customerExist",value:function(e,t,r,o){var i=new m.f;return i=(i=(i=i.append("name",t)).append("id",r.toString())).append("taxRefNo",o),this.http.get(this.baseUrl+"".concat(e==b.b.Client?"client/clientexists":"supplier/supplierexists"),{observe:"response",params:i}).pipe(Object(p.a)((function(e){return e})))}}]),e}()).\u0275fac=function(e){return new(e||o)(l.Vb(m.b))},o.\u0275prov=l.Hb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),v=r("5eHb"),g=r("Ag0X"),D=r("ZOsW"),C=r("S8xs");function y(e,t){if(1&e&&(l.Rb(0,"span",14),l.Dc(1),l.Qb()),2&e){var r=l.bc();l.zb(1),l.Fc("",1==r.customerType?"Company Name":"Supplier Name"," is required")}}function R(e,t){1&e&&(l.Rb(0,"span",14),l.Dc(1,"City is required"),l.Qb())}function Q(e,t){1&e&&(l.Rb(0,"span",14),l.Dc(1,"Country is required"),l.Qb())}function F(e,t){1&e&&(l.Rb(0,"span",14),l.Dc(1,"Representative Name is required"),l.Qb())}function S(e,t){1&e&&(l.Rb(0,"span",14),l.Dc(1,"Email is required"),l.Qb())}function k(e,t){1&e&&(l.Rb(0,"span",14),l.Dc(1,"Email is not valid"),l.Qb())}function T(e,t){1&e&&(l.Rb(0,"span",14),l.Dc(1,"Mobile No is required"),l.Qb())}var N,x=((N=function(){function e(t,r,o,i,a){_classCallCheck(this,e),this.customerService=t,this.router=r,this.formBuilder=o,this.toastr=i,this.activatedroute=a,this.customerId=0}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.customerId=+this.activatedroute.snapshot.paramMap.get("id"),this.activatedroute.data.subscribe((function(t){e.customerType=t.type})),this.createCustomerForm(),this.getCountriesLookup()}},{key:"createCustomerForm",value:function(){this.customerForm=this.formBuilder.group({id:new u.e(0),name:new u.e("",[u.q.required]),city:new u.e(null,[u.q.required]),country:new u.e(null,[u.q.required]),address:new u.e(""),taxReferenceNumber:new u.e(""),representativeName:new u.e("",[u.q.required]),email:new u.e("",[u.q.pattern("^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$")]),mobileNumber:new u.e("",[u.q.required])})}},{key:"collectFormData",value:function(){this.customerEditor={id:this.customerForm.controls.id.value,name:this.customerForm.controls.name.value,cityId:this.customerForm.controls.city.value.id,address:this.customerForm.controls.address.value,taxReferenceNumber:this.customerForm.controls.taxReferenceNumber.value,representativeName:this.customerForm.controls.representativeName.value,email:this.customerForm.controls.email.value,mobileNumber:this.customerForm.controls.mobileNumber.value}}},{key:"assignFormData",value:function(e){this.customerForm.controls.id.setValue(e.id),this.customerForm.controls.name.setValue(e.name),this.customerForm.controls.address.setValue(e.address),this.customerForm.controls.country.setValue(this.countries.filter((function(t){return t.id==e.countryId}))[0]),this.getCitiesByCountryId(this.countries.filter((function(t){return t.id==e.countryId}))[0]),this.customerForm.controls.taxReferenceNumber.setValue(e.taxReferenceNumber),this.customerForm.controls.representativeName.setValue(e.representativeName),this.customerForm.controls.email.setValue(e.email),this.customerForm.controls.mobileNumber.setValue(e.mobileNumber)}},{key:"loadCustomer",value:function(){var e=this;this.customerService.getCustomerById(this.customerType,+this.activatedroute.snapshot.paramMap.get("id")).subscribe((function(t){e.customer=t,e.customer&&e.assignFormData(e.customer)}),(function(e){console.log(e.message)}))}},{key:"onSubmit",value:function(){var e=this;this.markFormGroupTouched(this.customerForm),this.customerForm.valid&&this.customerService.customerExist(this.customerType,this.customerForm.controls.name.value,this.customerForm.controls.id.value,this.customerForm.controls.taxReferenceNumber.value).subscribe((function(t){t.body?e.toastr.error("".concat(e.customerType==b.b.Client?"Client":"Supplier"," is already exist")):(e.collectFormData(),e.saveCustomer())}),(function(e){console.log(e.message)}))}},{key:"saveCustomer",value:function(){var e=this;this.customerService.saveCustomer(this.customerType,this.customerEditor,this.customerId).subscribe((function(t){e.toastr.success("".concat(e.customerType==b.b.Client?"Client":"Supplier"," saved successfully")),e.router.navigateByUrl("/".concat(e.customerType==b.b.Client?"client":"supplier"))}),(function(e){console.log(e)}))}},{key:"getCountriesLookup",value:function(){var e=this;this.customerService.getCountriesLookup().subscribe((function(t){e.countries=t,e.customerId>0&&e.loadCustomer()}),(function(e){console.log(e)}))}},{key:"getCitiesByCountryId",value:function(e){var t=this;e?this.customerService.getCitiesByCountryIdLookup(e.id).subscribe((function(e){t.cities=e,t.customerId>0&&t.customerForm.controls.city.setValue(t.cities.filter((function(e){return e.id==t.customer.cityId}))[0])}),(function(e){console.log(e)})):this.cities=[]}},{key:"markFormGroupTouched",value:function(e){var t=this;Object.values(e.controls).forEach((function(e){e.markAsTouched(),e.controls&&t.markFormGroupTouched(e)}))}}]),e}()).\u0275fac=function(e){return new(e||N)(l.Lb(f),l.Lb(s.c),l.Lb(u.d),l.Lb(v.b),l.Lb(s.a))},N.\u0275cmp=l.Fb({type:N,selectors:[["app-customer-editor"]],decls:87,vars:16,consts:[["id","page-wrapper",1,""],[1,"container-fluid"],[1,"row","row-stat"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-heading","panel-heading-divider"],[1,"panel-subtitle"],[1,"panel-body"],[1,"panel-heading","panel-heading-no-divider"],[1,"row","form-horizontal",3,"formGroup","ngSubmit"],[1,"col-md-6"],[1,"form-group"],[1,"row"],[1,"col-sm-3","control-label"],[1,"text-danger"],[1,"col-sm-7"],["id","Name","autocomplete","off","formControlName","name","type","text",1,"form-control"],["class","text-danger",4,"ngIf"],["bindLabel","name","appendTo","body","formControlName","city",3,"items"],["id","Name","autocomplete","off","formControlName","taxReferenceNumber","type","text",1,"form-control"],["bindLabel","name","appendTo","body","formControlName","country",3,"items","change"],["id","Address","autocomplete","off","formControlName","address","type","text",1,"form-control"],[3,"isAnimated"],["heading","Contact Information",3,"isOpen"],[1,"col-sm-4","control-label"],["id","Name","autocomplete","off","formControlName","representativeName","type","text",1,"form-control"],["id","Name","autocomplete","off","formControlName","email","type","text",1,"form-control"],["id","Name","autocomplete","off","formControlName","mobileNumber","type","text",1,"form-control"],[1,"col-md-11"],["type","submit","id","Save",1,"btn","btn-primary","pull-right"],[1,"fa","fa-save"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"div",4),l.Rb(5,"div",5),l.Dc(6),l.Rb(7,"span",6),l.Dc(8),l.Qb(),l.Qb(),l.Rb(9,"div",7),l.Rb(10,"div",8),l.Mb(11,"app-section-header"),l.Qb(),l.Rb(12,"form",9),l.Zb("ngSubmit",(function(){return t.onSubmit()})),l.Rb(13,"div",10),l.Rb(14,"div",11),l.Rb(15,"div",12),l.Rb(16,"label",13),l.Dc(17),l.Rb(18,"span",14),l.Dc(19,"*"),l.Qb(),l.Qb(),l.Rb(20,"div",15),l.Mb(21,"input",16),l.Bc(22,y,2,1,"span",17),l.Qb(),l.Qb(),l.Qb(),l.Rb(23,"div",11),l.Rb(24,"div",12),l.Rb(25,"label",13),l.Dc(26,"City"),l.Rb(27,"span",14),l.Dc(28,"*"),l.Qb(),l.Qb(),l.Rb(29,"div",15),l.Mb(30,"ng-select",18),l.Bc(31,R,2,0,"span",17),l.Qb(),l.Qb(),l.Qb(),l.Rb(32,"div",11),l.Rb(33,"div",12),l.Rb(34,"label",13),l.Dc(35," Tax Reference No"),l.Qb(),l.Rb(36,"div",15),l.Mb(37,"input",19),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(38,"div",10),l.Rb(39,"div",11),l.Rb(40,"div",12),l.Rb(41,"label",13),l.Dc(42,"Country"),l.Rb(43,"span",14),l.Dc(44,"*"),l.Qb(),l.Qb(),l.Rb(45,"div",15),l.Rb(46,"ng-select",20),l.Zb("change",(function(e){return t.getCitiesByCountryId(e)})),l.Qb(),l.Bc(47,Q,2,0,"span",17),l.Qb(),l.Qb(),l.Qb(),l.Rb(48,"div",11),l.Rb(49,"div",12),l.Rb(50,"label",13),l.Dc(51,"Address"),l.Qb(),l.Rb(52,"div",15),l.Mb(53,"input",21),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(54,"div",10),l.Rb(55,"accordion",22),l.Rb(56,"accordion-group",23),l.Rb(57,"div",11),l.Rb(58,"div",12),l.Rb(59,"label",24),l.Dc(60,"Representative Name"),l.Rb(61,"span",14),l.Dc(62,"*"),l.Qb(),l.Qb(),l.Rb(63,"div",15),l.Mb(64,"input",25),l.Bc(65,F,2,0,"span",17),l.Qb(),l.Qb(),l.Qb(),l.Rb(66,"div",11),l.Rb(67,"div",12),l.Rb(68,"label",24),l.Dc(69,"Email"),l.Qb(),l.Rb(70,"div",15),l.Mb(71,"input",26),l.Bc(72,S,2,0,"span",17),l.Bc(73,k,2,0,"span",17),l.Qb(),l.Qb(),l.Qb(),l.Rb(74,"div",11),l.Rb(75,"div",12),l.Rb(76,"label",24),l.Dc(77,"Mobile No"),l.Rb(78,"span",14),l.Dc(79,"*"),l.Qb(),l.Qb(),l.Rb(80,"div",15),l.Mb(81,"input",27),l.Bc(82,T,2,0,"span",17),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(83,"div",28),l.Rb(84,"button",29),l.Rb(85,"i",30),l.Dc(86," Save"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(6),l.Gc(" ",t.customerId>0?"Edit":"Add"," ",1==t.customerType?"Client":"Supplier",""),l.zb(2),l.Fc("Save ",1==t.customerType?"Product":"Service"," information"),l.zb(4),l.hc("formGroup",t.customerForm),l.zb(5),l.Fc("",1==t.customerType?"Company":"Supplier"," Name"),l.zb(5),l.hc("ngIf",t.customerForm.get("name").invalid&&t.customerForm.get("name").touched&&t.customerForm.get("name").errors.required),l.zb(8),l.hc("items",t.cities),l.zb(1),l.hc("ngIf",t.customerForm.get("city").invalid&&t.customerForm.get("city").touched&&t.customerForm.get("city").errors.required),l.zb(15),l.hc("items",t.countries),l.zb(1),l.hc("ngIf",t.customerForm.get("country").invalid&&t.customerForm.get("country").touched&&t.customerForm.get("country").errors.required),l.zb(8),l.hc("isAnimated",!0),l.zb(1),l.hc("isOpen",!0),l.zb(9),l.hc("ngIf",t.customerForm.get("representativeName").invalid&&t.customerForm.get("representativeName").touched&&t.customerForm.get("representativeName").errors.required),l.zb(7),l.hc("ngIf",t.customerForm.get("email").invalid&&t.customerForm.get("email").touched&&t.customerForm.get("email").errors.required),l.zb(1),l.hc("ngIf",t.customerForm.get("email").invalid&&t.customerForm.get("email").touched&&t.customerForm.get("email").errors.pattern),l.zb(9),l.hc("ngIf",t.customerForm.get("mobileNumber").invalid&&t.customerForm.get("mobileNumber").touched&&t.customerForm.get("mobileNumber").errors.required))},directives:[g.a,u.r,u.n,u.h,u.b,u.m,u.f,i.n,D.a,C.a,C.c],styles:[""]}),N),z=r("Iab2"),I=r("wd/R"),w=function e(){_classCallCheck(this,e),this.createFromDate=null,this.createToDate=null,this.invoiceFromDate=null,this.invoiceToDate=null,this.sort=null,this.pageNumber=1,this.pageSize=10,this.search=null},M=r("K3ix"),P=r("PVRP"),Y=r("a4eG"),L=r("/gyc"),B=["search"],E=["fromDate"],O=["toDate"],A=["invoiceFromDate"],q=["invoiceToDate"];function _(e,t){if(1&e&&(l.Rb(0,"a",38),l.Mb(1,"i",39),l.Dc(2),l.Qb()),2&e){var r=l.bc();l.jc("routerLink","/",1==r.customerType?"client":"supplier","/add"),l.zb(2),l.Fc(" Add New ",1==r.customerType?"Client":"Supplier","")}}function U(e,t){if(1&e){var r=l.Sb();l.Rb(0,"input",40,41),l.Zb("keyup",(function(){return l.vc(r),l.bc().onSearch()})),l.Qb()}}function V(e,t){if(1&e){var r=l.Sb();l.Rb(0,"a",45),l.Zb("click",(function(){l.vc(r),l.bc();var e=l.tc(25);return l.bc().openDeleteModal(e)})),l.Mb(1,"i",46),l.Qb()}}function j(e,t){if(1&e){var r=l.Sb();l.Rb(0,"div",47),l.Rb(1,"h4",48),l.Dc(2),l.Qb(),l.Rb(3,"button",49),l.Zb("click",(function(){return l.vc(r),l.bc(2).deletemodalRef.hide()})),l.Rb(4,"span",50),l.Dc(5,"\xd7"),l.Qb(),l.Qb(),l.Qb(),l.Rb(6,"div",51),l.Rb(7,"h5",52),l.Dc(8),l.Qb(),l.Rb(9,"button",53),l.Zb("click",(function(){l.vc(r);var e=l.bc().$implicit;return l.bc().deleteCustomer(e.id)})),l.Mb(10,"i",46),l.Dc(11," Yes "),l.Qb(),l.Qb()}if(2&e){var o=l.bc(2);l.zb(2),l.Fc(" Delete ",1==o.customerType?"Client":"Supplier"," "),l.zb(6),l.Fc(" Are you sure you want to delete this ",1==o.customerType?"client":"supplier"," ? ")}}var J=function(e){return[e]};function Z(e,t){if(1&e&&(l.Rb(0,"a",38),l.Mb(1,"i",55),l.Qb()),2&e){var r=l.bc(2).$implicit;l.hc("routerLink",l.mc(1,J,"/client/edit/"+r.id))}}function G(e,t){if(1&e&&(l.Rb(0,"span"),l.Bc(1,Z,2,3,"a",54),l.Qb()),2&e){var r=l.bc(2);l.zb(1),l.hc("ngIf",1==r.customerType)}}function $(e,t){if(1&e&&(l.Rb(0,"a",38),l.Mb(1,"i",55),l.Qb()),2&e){var r=l.bc(2).$implicit;l.hc("routerLink",l.mc(1,J,"/supplier/edit/"+r.id))}}function K(e,t){if(1&e&&(l.Rb(0,"span"),l.Bc(1,$,2,3,"a",54),l.Qb()),2&e){var r=l.bc(2);l.zb(1),l.hc("ngIf",2==r.customerType)}}var X=function(){return["Clients:Delete Client","Suppliers:Delete Supplier"]};function H(e,t){if(1&e&&(l.Rb(0,"tr"),l.Rb(1,"td"),l.Dc(2),l.Qb(),l.Rb(3,"td"),l.Dc(4),l.Qb(),l.Rb(5,"td"),l.Dc(6),l.Qb(),l.Rb(7,"td"),l.Dc(8),l.Qb(),l.Rb(9,"td"),l.Dc(10),l.Qb(),l.Rb(11,"td"),l.Dc(12),l.Qb(),l.Rb(13,"td"),l.Dc(14),l.Qb(),l.Rb(15,"td"),l.Dc(16),l.Qb(),l.Rb(17,"td"),l.Dc(18),l.Qb(),l.Rb(19,"td"),l.Dc(20),l.cc(21,"date"),l.Qb(),l.Rb(22,"td"),l.Bc(23,V,2,0,"a",42),l.Bc(24,j,12,2,"ng-template",null,43,l.Cc),l.Bc(26,G,2,1,"span",44),l.Bc(27,K,2,1,"span",44),l.Qb(),l.Qb()),2&e){var r=t.$implicit;l.zb(2),l.Fc(" ",r.id," "),l.zb(2),l.Fc(" ",r.name," "),l.zb(2),l.Fc(" ",r.city," "),l.zb(2),l.Fc(" ",r.address," "),l.zb(2),l.Ec(r.taxReferenceNumber),l.zb(2),l.Ec(r.representativeName),l.zb(2),l.Ec(r.email),l.zb(2),l.Ec(r.mobileNumber),l.zb(2),l.Ec(r.createdBy),l.zb(2),l.Ec(l.dc(21,13,r.createDate)),l.zb(3),l.hc("hasClaim",l.lc(15,X)),l.zb(3),l.hc("hasClaim","Clients:Add Client"),l.zb(1),l.hc("hasClaim","Suppliers:Add Supplier")}}var W,ee,te=function(){return{dateInputFormat:"DD-MM-YYYY",showClearButton:!0,clearPosition:"right",showTodayButton:!0,todayPosition:"left"}},re=function(){return{isAnimated:!0}},oe=function(){return["Clients:Add Client","Suppliers:Add Supplier"]},ie=[{path:"",component:(W=function(){function e(t,r,o,i,a){_classCallCheck(this,e),this.customerService=t,this.activatedroute=r,this.toastr=o,this.router=i,this.modalService=a,this.totalItems=64,this.customers=[],this.customerParams=new w,this.exportParams=new w}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.activatedroute.data.subscribe((function(t){e.customerType=t.type})),this.getCustomers()}},{key:"getCustomers",value:function(){var e=this;this.customerService.getCustomers(this.customerType,this.customerParams).subscribe((function(t){e.customers=t.data,e.customerParams.pageNumber=t.pageIndex,e.customerParams.pageSize=t.pageSize,e.totalCount=t.count}),(function(e){console.log(e)}))}},{key:"getCountries",value:function(){var e=this;this.customerService.getCountriesLookup().subscribe((function(t){e.countries=t}),(function(e){console.log(e)}))}},{key:"getCitiesByCountryId",value:function(e){var t=this;this.customerService.getCitiesByCountryIdLookup(e).subscribe((function(e){t.cities=e}),(function(e){console.log(e)}))}},{key:"onPageChanged",value:function(e){this.customerParams.pageNumber!==e&&(this.customerParams.pageNumber=e,this.getCustomers())}},{key:"onSearch",value:function(){this.customerParams.search=this.searchTerm.nativeElement.value,this.customerParams.pageNumber=1,this.getCustomers()}},{key:"onFilter",value:function(){var e=this.fromDateTerm.nativeElement.value,t=this.toDateTerm.nativeElement.value,r=this.invoiceFromDate.nativeElement.value,o=this.invoiceToDate.nativeElement.value;if(e&&t&&e>t||r&&o&&r>o)this.toastr.error("ToDate must be after from date");else{if(e){var i=I(e,"DD/MM/YYYY").add(2,"hours");this.customerParams.createFromDate=i.toDate()}else this.customerParams.createFromDate=e;if(t){var a=I(t,"DD/MM/YYYY").add(2,"hours");this.customerParams.createToDate=a.toDate()}else this.customerParams.createToDate=t;r?(i=I(r,"DD/MM/YYYY").add(2,"hours"),this.customerParams.invoiceFromDate=i.toDate()):this.customerParams.invoiceFromDate=r,o?(a=I(o,"DD/MM/YYYY").add(2,"hours"),this.customerParams.invoiceToDate=a.toDate()):this.customerParams.invoiceToDate=o,this.customerParams.pageNumber=1,this.getCustomers()}}},{key:"Export",value:function(){var e=this,t=this.fromDateTerm.nativeElement.value,r=this.toDateTerm.nativeElement.value,o=this.invoiceFromDate.nativeElement.value,i=this.invoiceToDate.nativeElement.value;if(t&&r&&t>r||o&&i&&o>i)this.toastr.error("ToDate must be after from date");else{if(t){var a=I(t,"DD/MM/YYYY").add(2,"hours");this.exportParams.createFromDate=a.toDate()}else this.exportParams.createFromDate=t;if(r){var n=I(r,"DD/MM/YYYY").add(2,"hours");this.exportParams.createToDate=n.toDate()}else this.exportParams.createToDate=r;o?(a=I(o,"DD/MM/YYYY").add(2,"hours"),this.exportParams.invoiceFromDate=a.toDate()):this.exportParams.invoiceFromDate=o,i?(n=I(i,"DD/MM/YYYY").add(2,"hours"),this.exportParams.invoiceToDate=n.toDate()):this.exportParams.invoiceToDate=i,this.exportParams.pageNumber=1,this.exportParams.pageSize=1e6,this.customerService.exportCustomers(this.customerType,this.exportParams).subscribe((function(t){var r=e.customerType==b.b.Client?"Clients_list_"+Date.now():"Suppliers_list_"+Date.now();z.saveAs(t,r)}),(function(e){console.log("Unable to export file")}))}}},{key:"openDeleteModal",value:function(e){this.deletemodalRef=this.modalService.show(e)}},{key:"deleteCustomer",value:function(e){var t=this;this.customerService.deleteCustomer(this.customerType,e).subscribe((function(){t.deletemodalRef.hide(),t.toastr.success("".concat(t.customerType==b.b.Client?"Client":"Supplier"," has been deleted successfully")),setTimeout((function(){t.reloadCurrentPage()}),2e3)}),(function(e){console.log(e)}))}},{key:"reloadCurrentPage",value:function(){var e=this,t=this.router.url;this.router.navigateByUrl("/",{skipLocationChange:!0}).then((function(){e.router.navigate([t])}))}}]),e}(),W.\u0275fac=function(e){return new(e||W)(l.Lb(f),l.Lb(s.a),l.Lb(v.b),l.Lb(s.c),l.Lb(M.a))},W.\u0275cmp=l.Fb({type:W,selectors:[["app-customer"]],viewQuery:function(e,t){var r;1&e&&(l.Jc(B,!0),l.Jc(E,!0),l.Jc(O,!0),l.Jc(A,!0),l.Jc(q,!0)),2&e&&(l.sc(r=l.ac())&&(t.searchTerm=r.first),l.sc(r=l.ac())&&(t.fromDateTerm=r.first),l.sc(r=l.ac())&&(t.toDateTerm=r.first),l.sc(r=l.ac())&&(t.invoiceFromDate=r.first),l.sc(r=l.ac())&&(t.invoiceToDate=r.first))},decls:77,vars:27,consts:[["id","page-wrapper",1,""],[1,"container-fluid"],[1,"row","row-stat"],[1,"col-sm-12"],[1,"row"],[1,"col-md-12"],[1,"panel","panel-default","panel-flat"],[1,"panel-heading","panel-heading-divider"],[1,"panel-subtitle"],[1,"panel-body"],[1,"panel-heading","panel-heading-no-divider"],[1,"table-responsive"],[1,"col-md-12","form-inline","md-form","form-sm","mt-1"],[1,"row","g-4","md-form"],[1,"col-auto"],["type","text","placeholder","Create Date From","bsDatepicker","",1,"form-control",3,"bsConfig"],["fromDate",""],["type","text","placeholder","Create Date To","bsDatepicker","",1,"form-control",3,"bsConfig"],["toDate",""],["type","text","placeholder","Invoice Date From","bsDatepicker","",1,"form-control",3,"bsConfig"],["invoiceFromDate",""],["type","text","placeholder","Invoice Date To","bsDatepicker","",1,"form-control",3,"bsConfig"],["invoiceToDate",""],[1,"btn","btn-primary","mb-3",3,"click"],[1,"fa","fa-filter"],[1,"col-auto","mt-2"],["class","action-button",3,"routerLink",4,"hasClaim"],["aria-hidden","true",1,"fa","fa-search","active"],["class","\n                            form-control\n                            searchbox\n                            form-control-sm\n                            ml-3\n                            w-75\n                          ","type","text","placeholder","Search","aria-label","Search",3,"keyup",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[1,"row","m-2","pull-right"],[1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-file-excel-o"],[1,"xs-mb-50","xs-mt-40","pull-right"],[3,"pageSize","totalCount","pageChanged"],[1,"xs-mb-50","xs-mt-40","pull-left"],[3,"pageNumber","pageSize","totalCount"],[1,"action-button",3,"routerLink"],[1,"fa","fa-plus"],["type","text","placeholder","Search","aria-label","Search",1,"form-control","searchbox","form-control-sm","ml-3","w-75",3,"keyup"],["search",""],["class","action-button",3,"click",4,"hasClaim"],["deletetemplate",""],[4,"hasClaim"],[1,"action-button",3,"click"],[1,"fa","fa-trash"],[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"close","pull-right",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"delete"],[1,"btn","btn-primary","mb-3","pull-right",3,"click"],["class","action-button",3,"routerLink",4,"ngIf"],[1,"fa","fa-edit"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"div",1),l.Rb(2,"div",2),l.Rb(3,"div",3),l.Rb(4,"div",4),l.Rb(5,"div",5),l.Rb(6,"div",6),l.Rb(7,"div",7),l.Dc(8),l.Rb(9,"span",8),l.Dc(10),l.Qb(),l.Qb(),l.Rb(11,"div",9),l.Rb(12,"div",10),l.Mb(13,"app-section-header"),l.Qb(),l.Rb(14,"div",11),l.Rb(15,"div",12),l.Rb(16,"div",13),l.Rb(17,"div",14),l.Mb(18,"input",15,16),l.Qb(),l.Rb(20,"div",14),l.Mb(21,"input",17,18),l.Qb(),l.Rb(23,"div",14),l.Mb(24,"input",19,20),l.Qb(),l.Rb(26,"div",14),l.Mb(27,"input",21,22),l.Qb(),l.Rb(29,"div",14),l.Rb(30,"button",23),l.Zb("click",(function(){return t.onFilter()})),l.Mb(31,"i",24),l.Dc(32," Filter "),l.Qb(),l.Qb(),l.Rb(33,"div",25),l.Bc(34,_,3,2,"a",26),l.Qb(),l.Qb(),l.Qb(),l.Mb(35,"br"),l.Rb(36,"div",12),l.Rb(37,"div",13),l.Rb(38,"div",14),l.Mb(39,"i",27),l.Bc(40,U,2,0,"input",28),l.Qb(),l.Qb(),l.Qb(),l.Mb(41,"br"),l.Rb(42,"table",29),l.Rb(43,"thead"),l.Rb(44,"tr"),l.Rb(45,"th"),l.Dc(46,"ID"),l.Qb(),l.Rb(47,"th"),l.Dc(48,"Name"),l.Qb(),l.Rb(49,"th"),l.Dc(50,"City"),l.Qb(),l.Rb(51,"th"),l.Dc(52,"Address"),l.Qb(),l.Rb(53,"th"),l.Dc(54,"Tax Reference Number"),l.Qb(),l.Rb(55,"th"),l.Dc(56,"Representative Name"),l.Qb(),l.Rb(57,"th"),l.Dc(58,"Email"),l.Qb(),l.Rb(59,"th"),l.Dc(60,"Mobile"),l.Qb(),l.Rb(61,"th"),l.Dc(62,"Created By"),l.Qb(),l.Rb(63,"th"),l.Dc(64,"Creation Date"),l.Qb(),l.Rb(65,"th"),l.Dc(66,"Actions"),l.Qb(),l.Qb(),l.Qb(),l.Rb(67,"tbody"),l.Bc(68,H,28,16,"tr",30),l.Qb(),l.Qb(),l.Rb(69,"div",31),l.Rb(70,"button",32),l.Zb("click",(function(){return t.Export()})),l.Mb(71,"i",33),l.Dc(72," Export "),l.Qb(),l.Qb(),l.Qb(),l.Rb(73,"div",34),l.Rb(74,"app-pager",35),l.Zb("pageChanged",(function(e){return t.onPageChanged(e)})),l.Qb(),l.Qb(),l.Rb(75,"div",36),l.Mb(76,"app-paging-header",37),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.zb(8),l.Fc(" ",1==t.customerType?"Clients":"Suppliers"," List"),l.zb(2),l.Fc("These are list of ",1==t.customerType?"Clients":"Suppliers"," with Reporting "),l.zb(8),l.hc("bsConfig",l.lc(18,te))("bsConfig",l.lc(19,re)),l.zb(3),l.hc("bsConfig",l.lc(20,te))("bsConfig",l.lc(21,re)),l.zb(3),l.hc("bsConfig",l.lc(22,te))("bsConfig",l.lc(23,re)),l.zb(3),l.hc("bsConfig",l.lc(24,te))("bsConfig",l.lc(25,re)),l.zb(7),l.hc("hasClaim",l.lc(26,oe)),l.zb(6),l.hc("ngIf",t.customers),l.zb(28),l.hc("ngForOf",t.customers),l.zb(6),l.hc("pageSize",t.customerParams.pageSize)("totalCount",t.totalCount),l.zb(2),l.hc("pageNumber",t.customerParams.pageNumber)("pageSize",t.customerParams.pageSize)("totalCount",t.totalCount))},directives:[g.a,a.b,a.a,P.a,i.n,i.m,Y.a,L.a,s.e],pipes:[i.e],styles:[".action-button[_ngcontent-%COMP%]{margin-right:10px;color:#007bff!important;cursor:pointer}.action-button[_ngcontent-%COMP%]:last-child{margin-right:0}.delete[_ngcontent-%COMP%]{color:#007bff!important}"]}),W),data:{Permission:["Clients:List/View Clients","Suppliers:List/View Suppliers"]},canActivate:[c.a]},{path:"add",component:x,canActivate:[c.a],data:{breadcrumb:"Add",Permission:["Clients:Add Client","Suppliers:Add Supplier"]}},{path:"edit/:id",component:x,canActivate:[c.a],data:{breadcrumb:"Edit",Permission:["Clients:Edit Client","Suppliers:Edit Supplier"]}}],ae=((ee=function e(){_classCallCheck(this,e)}).\u0275mod=l.Jb({type:ee}),ee.\u0275inj=l.Ib({factory:function(e){return new(e||ee)},imports:[[s.f.forChild(ie)],s.f]}),ee),ne=r("Lm2G"),se=r("PCNd");r.d(t,"CustomerModule",(function(){return ue}));var ce,ue=((ce=function e(){_classCallCheck(this,e)}).\u0275mod=l.Jb({type:ce}),ce.\u0275inj=l.Ib({factory:function(e){return new(e||ce)},imports:[[i.c,se.a,ae,n.a,ne.b.forRoot(),a.c.forRoot()]]}),ce)}}]);